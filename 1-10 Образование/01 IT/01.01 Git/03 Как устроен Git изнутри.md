tags: [[git]]

При инициализировании git репозитория у себя в проекте, у вас будет создана папка .git, где и будут храниться все снимки, ссылки, ветки и тому подобное. 

![[Pasted image 20221109222637.png|center|300]]

Самая начальная структура .git директории. 
+ Файл config хранит в себе локальные настройки для данного репозитория
+ Файл description используется для программы git web
+ Файл HEAD хранит в себе ссылку (ref), на актуальную на данный момент ветку
+ Директория hooks хранит в себе набор хуков, которые можно настроить и включить в работу
+ Директория info расположен файл с глобальными настройкам игнорирования файлов
+ Директория objects хранит в себе базу данных снимков нашего гит репозитория
+ Директория refs хранит в себе ссылки на коммиты (ветки, теги и другое)

GIt - контенто-адресуемая файловая система или простыми словами файловая система ключ-значение. Каждый файл, который будет находиться у нас в проекте, будет так же храниться в виде blob файла у нас в репозитории.
Например обычный файл test.txt с текстом 'test', для того чтобы запомнить этот файл гит вычислить его хеш контрольную сумму SHA-1, что даст нам определенную 40-битовую запись. Первые два бита этой записи будут обозначать директорию, где будет храниться blob файл, а остальные 38 битов название файла.

Допустим наш файл test.txt имеет контрольную хеш сумму - d670460b4b4aece5915caf5c68d12f560a9fe3e4, тода его путь хранения будет таковым - .git/objects/d6/70460b4b4aece5915caf5c68d12f560a9fe3e4.

blob — binary large object.

Мы уже научились понимать как git хранит файлы, но как git понимает, что файл находиться в какой-то директории, а также распознает его имя. Для этого git создает еще один тип blob файла - tree (деревья), в которых содержаться: 

+ unix-подобная система прав доступа 100644 - обычный файл, еще существует 100755 — исполняемый файл, 120000 — символическая ссылка,  а также 040000 для обозначения директорий
+ тип файла blob, tree, etc
+ Название оригинального файла или директории

![[Pasted image 20221109223944.png]]

Хеш сумма указывающая на дерево так же представляет под собой blob файл, в котом описывается директория lib, в итоге мы имеем связанную структуру, где корневая директория знает о всех своих подкатегориях и файлах:

![[Pasted image 20221109224505.png|center|500]]

После того как мы научились создавать деревья и обычные файлы, нам нужно научиться все это объединять в коммит - еще один тип blob файла в котором храниться информация о том, кто, когда и почему сохранил их.

![[Pasted image 20221109230012.png|center|500]]

Пример обычного коммита который содержит в себе ссылку на дерево состояния проекта на момент создания снимка.
В итоге получаем удобную и оптимизированную систему хранения состояний проекта:
![[Pasted image 20221109230242.png]]


Книга 443-453 стр.