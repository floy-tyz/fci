
Интеллектуальный прокси-сервер AMQP с подключением AMQP и объединением/повторным использованием каналов. Позволяет, например, PHP-клиентам поддерживать долговременные соединения с вышестоящими серверами, увеличивая скорость публикации на величину или более.

В протоколе AMQP, если вы открываете соединение, клиент и сервер должны обменяться 7 TCP-пакетами. Если вы затем хотите опубликовать сообщение, вам нужно открыть канал, для которого требуется еще 2, а затем для публикации вам понадобится еще как минимум один, а затем, чтобы изящно закрыть соединение, вам нужно еще 4 пакета. Всего 15 пакетов TCP или 18, если вы используете AMQPS (TLS). Для клиентов, которые по какой-либо причине не могут поддерживать длительные соединения с сервером, это оказывает значительное влияние на задержку.

Этот прокси-сервер, если он работает на том же компьютере, что и клиент, может сэкономить всю эту задержку. Когда соединение установлено с прокси-сервером, прокси-сервер открывает соединение с вышестоящим сервером, используя учетные данные, предоставленные клиентом. Затем трафик AMQP перенаправляется между клиентом и сервером, но когда клиент отключается, прокси-сервер перехватывает команду закрытия канала и вместо этого оставляет его открытым на вышестоящем сервере (если считается безопасным). В следующий раз, когда клиент подключается (с теми же учетными данными), соединение с вышестоящим сервером используется повторно, поэтому не нужно создавать TCP-пакеты для открытия и согласования соединения AMQP или открытия и ожидания открытия канала.